<tagLib name="html,cx" />
<include file="Public:header" />
<include file="Public:sider" />
<script type="text/javascript">
    $(document).ready(function() {
       // colorPicker();

    });
</script>
		<div id="main-content">
        <!-- Main Content Section with everything -->
			<noscript>
            <!-- Show a notification if the user has disabled javascript -->
                <div class="notification error png_bg">
					<div>
						您的浏览器不支持Javascript或者已经禁用了Javascript。请升级您的浏览器或者<a href="http://www.google.com/support/bin/answer.py?answer=23852" title="如何启用 JavaScript">启用</a>Javascript支持才能正确浏览页面.
					</div>
				</div>
			</noscript>
			<!-- Page Head -->
			<ul class="shortcut-buttons-set">
				
                <li><a class="shortcut-button" href="{:U("Recruit/index")}"><span>
					<img src="__PUBLIC__/Admin/Images/icons/arrow_left_48.png" alt="icon" /><br />
					返回招聘信息列表
				</span></a></li>
                <li><a class="shortcut-button" href="{:U("Recruit/insert")}"><span>
					<img src="__PUBLIC__/Admin/Images/icons/add_48.png" alt="icon" /><br />
					添加招聘信息
				</span></a></li>
				
			</ul><!-- End .shortcut-buttons-set -->
			<div class="clear"></div>
            <!-- End .clear -->
			<div class="content-box"><!-- Start Content Box -->
				<div class="content-box-header">
					<h3>招聘信息管理</h3>
					<ul class="content-box-tabs">
						<li><a href="#tab1" class="default-tab">必填信息</a></li> <!-- href must be unique and match the id of target div -->
						<li><a href="#tab2">选填信息</a></li>
					</ul>
					<div class="clear"></div>
				</div> <!-- End .content-box-header -->
				<div class="content-box-content">
                    <form method="post" action="{:U("Recruit/doModify")}" id="mainFrom" enctype="multipart/form-data">
					<div class="tab-content default-tab" id="tab1"> <!-- This is the target div. id must match the href of this div's tab -->
						<fieldset class="column-left"> <!-- Set class to "column-left" or "column-right" on fieldsets to divide the form into columns -->
							<p>
								<label>招聘职位标题</label>
								<input class="text-input large-input" type="text" name="job_title" id="job_title" value="{$vo.job_title}" />
							</p>
                            <p>
								<label>公司名称</label>
								<select name="company_id" id="company_id">
                                    <volist name="companies" id="row">
                                        <if condition="$row['id'] eq $vo['company_id']"><option value="{$row['id']}" selected="selected" >{$row['name']}</option>
                                        <else/><option value="{$row['id']}" >{$row['name']}</option>
                                        </if>
                                    </volist>
                            	</select>
							</p>
                            <p>
                                <label>职位类别</label>
                                <select name="type" id="type">
                                    <volist name="domain" id="row">
                                        <if condition="$row['id'] eq $vo['type']"><option value="{$row['id']}" selected="selected" >{$row['title']}</option>
                                            <else/><option value="{$row['id']}" >{$row['title']}</option>
                                        </if>
                                    </volist>
                                </select>
                            </p>
                            <p>
                                <label>最低学历</label>
                                <select name="education" id="education">
                                    <volist name="education" id="row">
                                        <if condition="$row['id'] eq $vo['education']"><option value="{$row['id']}" selected="selected" >{$row['title']}</option>
                                            <else/><option value="{$row['id']}" >{$row['title']}</option>
                                        </if>
                                    </volist>
                                </select>
                            </p>
                            <p>
                                <label>外语水平</label>
                                <select name="foreign_language" id="foreign_language">
                                <volist name="english" id="row">
                                    <if condition="$row['id'] eq $vo['foreign_language']"><option value="{$row['id']}" selected="selected" >{$row['title']}</option>
                                        <else/><option value="{$row['id']}" >{$row['title']}</option>
                                    </if>
                                </volist>
                                    </select>
                            </p>

                        </fieldset>
                        <fieldset class="column-right">
                            <p>
                                <label>雇佣形式</label>
                                <select name="form" id="form">
                                    <volist name="form" id="row">
                                        <if condition="$row['id'] eq $vo['form']"><option value="{$row['id']}" selected="selected" >{$row['title']}</option>
                                            <else/><option value="{$row['id']}" >{$row['title']}</option>
                                        </if>
                                    </volist>
                                </select>
                            </p>
                            <p>
                                <label>工作地点</label>
                            </p>
                                <div  id="workPlace" data-id='0' name="workPlace" class="recruit_select select">
                                    <span id="workPlace_txt">
                                        <volist name="vo['areas']" id="area">
                                            {$area['title']}&nbsp;
                                        </volist>
                                        </span>
                                    <input id="workPlace_id" value="{$vo.workPlace}" style="display: none"/>
                                </div>
                                <!--<input class="text-input large-input" data-id='0' type="text" name="workPlace" id="workPlace" value="{$vo.workPlace}" />-->

                            <div id="region_picker">
                                <a href="javascript:;" class="region_closer" title="cancel">×</a>
                                <div class="regions">
                                </div>
                            </div>
                            <p>
                                <label>薪资待遇</label>
                                <input class="text-input large-input" type="text" name="salary" id="salary" value="{$vo.salary}" />
                            </p>
                            <p>
                                <label>雇佣人数</label>
                                <input class="text-input large-input" type="text" name="count" id="count" value="{$vo.count}" />
                            </p>
                            <p>
                                <label>计算机水平</label>
                                <select name="computer_skill" id="computer_skill">
                                <volist name="computer" id="row">
                                    <if condition="$row['id'] eq $vo['computer_skill']"><option value="{$row['id']}" selected="selected" >{$row['title']}</option>
                                        <else/><option value="{$row['id']}" >{$row['title']}</option>
                                    </if>
                                </volist>
                                    </select>
                            </p>
                        </fieldset>
                        <div class="clear"></div><!-- End .clear -->
                        <fieldset>
                                <label>职位描述内容</label>
                                <textarea class="text-input textarea" name="description" id="description" cols="79" rows="4">{$vo.description}</textarea>
                            <label>任职条件内容</label>
                            <textarea class="text-input textarea" name="condition" id="condition" cols="79" rows="4">{$vo.condition}</textarea>
							<p>
                                <input class="button" type="submit" name="submit" value="提交更新"/>
                                <input class="button" type="reset" name="button" id="button" value="还原重填"/>
							</p>
                        </fieldset>
                    </div> <!-- End #tab1 -->
                    <div class="tab-content" id="tab2">
                        <fieldset class="column-left">
                            <p>
                                <label>模板</label>
                                <input class="text-input medium-input" type="text" name="template" id="template" value="{$vo.template}" />
                                <br /><small>若本模块拥有多个模板文件供调用，可在此填入相应的模板名（无需填写.html），保持默认则留空即可。</small>
                            </p>
                            <p>
                                <label>标签</label>
                                <input class="text-input medium-input" type="text" name="tags" id="tags" value="{$vo.tags}" />
                                <br /><small>各个标签之间请用","隔开（注：此处为英文半角符号）</small>
                            </p>
                            <p>
                                <label>关键词</label>
                                <input class="text-input medium-input" type="text" name="keyword" id="keyword" value="{$vo.keyword}" />
                                <br /><small>各个关键词之间请用","或者"|"隔开（注：此处为英文半角符号）</small>
                            </p>
                            <p>
                                <label>外链地址</label>
                                <input class="text-input medium-input" type="text" name="link_url" id="link_url" value="{$vo.link_url}" />
                                <br /><small>填写外链地址后，本条目链接将自动转向所填写的网址，以上填写的信息将不会显示。</small>
                            </p>
                        </fieldset>
                        <fieldset class="column-right">
                            <p>
                                <label>来源</label>
                                <input class="text-input medium-input" type="text" name="copy_from" id="copy_from" value="{$vo.copy_from}" />
                            </p>
                            <p>
                                <label>来源链接</label>
                                <input class="text-input medium-input" type="text" name="from_link" id="from_link" value="{$vo.from_link}" />
                            </p>
							<p>
                                <label>其它参数</label>
                                <select name="recommend" id="recommend">
                              		<option value="0" {$vo.recommend|selected=0}>默认不推荐</option>
                              		<option value="1" {$vo.recommend|selected=1}>推荐</option>
                            	</select>
								<select name="status" id="status">
				          			<option value="0" {$vo.status|selected=0}>默认显示</option>
				          			<option value="1" {$vo.status|selected=1}>隐藏</option>
                        		</select>
                                <select name="istop" id="istop">
				          			<option value="0" {$vo.istop|selected=0}>默认不置顶</option>
				          			<option value="1" {$vo.istop|selected=1}>置顶</option>
              					</select>
                                浏览 <input name="view_count" type="text" id="view_count" value="{$vo.view_count|default=0}" size="5" maxlength="12"  />
								排序 <input name="display_order" type="text" id="display_order" value="{$vo.display_order|default=0}" size="5" maxlength="12"  />
                                <br /><small>置顶以修改时间倒序排列，即后修改的排在先修改的前面；排序以排列序数倒序排列，默认为0，数字越大，则越靠前</small>
                            </p>
                            <p>
                            	<label>录入时间</label>
                                <input class="text-input Wdate" type="text" name="create_time" id="create_time" onfocus="WdatePicker({dateFmt:'yyyy-MM-dd',isShowClear:false,readOnly:true,isShowToday:true})" value="{$vo.create_time|date="Y-m-d",###}"/>
                            </p>
						</fieldset>
						<div class="clear"></div><!-- End .clear -->
							<p>
                                <input class="button" type="submit" name="submit" value="提交更新"/>
                                <input class="button" type="reset" name="button" id="button" value="还原重填"/>
                                <input name="id" type="hidden" id="id" value="{$vo.id}" />
	    						<input name="old_file" type="hidden" id="old_file" value="{$vo.attach_file}" />
							</p>
					</div> <!-- End #tab2 -->
                    </form>
				</div> <!-- End .content-box-content -->
			</div> <!-- End .content-box -->
			<div class="clear"></div>
<script type="text/javascript">
    $(function () {
        $(document).on("click",".region_li",function(){
            var data_id=$(this).attr('data-id');
            $(this).closest('.region_list').children('li').removeClass('region_selected');
            $(this).addClass('region_selected');
            getArea(data_id);
            showArea();
        });

        $('.region_closer').click(function () {
            $("#region_picker").css('display','none');
        });
        $('#workPlace').click(function () {
            var data_id=$(this).attr('data-id');
            getArea(data_id);
            $("#region_picker").css('display','block');
        });

        function showArea() {
            var txt=new Array();
            var ids=new Array();
            $('.region_selected').each(function () {
                txt.push($(this).text());
                ids.push($(this).attr('data-id'));
            });
            $("#workPlace_txt").text(txt);
            $("#workPlace_id").attr('value',ids[ids.length-1]);
        }

        function getArea(data_id) {
            var href=window.location.protocol+'//'+window.location.host+'/webApp/Public/getArea';
            //   var href='http://localhost/webApp/Public/getArea';
            var regions=$(".regions");
            $.ajax({
                type:'post',
                url:href,
                data:{id:data_id},
                cache:false,
                //  async: false,
                dataType:'json',
                error:function(){
                    alert('error');
                },
                success:function(data){
                    if(data.status==1){
                        var content=data.data;
                        if(data.info=='1'){
                            regions.children('ul').remove();
                            addArea('area_prov',content);
                        }else if(data.info=='2'){
                            regions.children('#area_city').remove();
                            regions.children('#area_district').remove();
                            addArea('area_city',content);
                        }else if(data.info=='3'){
                            regions.children('#area_district').remove();
                            addArea('area_district',content);
                        }else{
                            alert('未知错误!!');
                        }
                    }else{

                    }
                }
            })
        }

        function addArea(nodeId,data) {
            var ul='<ul class="region_list" id="'+nodeId+'"> </ul>';
            $(".regions").append(ul);
            var node=$('#'+nodeId);
            var li;
            for(var i=0;i<data.length;i++){
                li='<li class="region_li" data-id="'+data[i]['id']+ '">'+ data[i]['title']+'</li>';
                node.append(li);
            }
        }


    });
$().ready(function(e) {
    var editor = new baidu.editor.ui.Editor({
        UEDITOR_HOME_URL:'__PUBLIC__/Js/ueditor/',
        iframeCssUrl :'__PUBLIC__/Js/ueditor/themes/default/iframe.css',
        textarea:'description',
        initialContent:''
    });
    editor.render('description');
    var editor2 = new baidu.editor.ui.Editor({
        UEDITOR_HOME_URL:'__PUBLIC__/Js/ueditor/',
        iframeCssUrl :'__PUBLIC__/Js/ueditor/themes/default/iframe.css',
        textarea:'condition',
        initialContent:''
    });
    editor2.render('condition');
});
</script>
<include file="Public:footer" />